<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PEAK — Royal Vote</title>

  <!-- Medieval fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@400;600;800&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#07090b;
      --mist:#f3f6ff;
      --ink:#0b0f14;

      --paper: rgba(245, 240, 226, .92);
      --paper2: rgba(245, 240, 226, .78);

      --steel1:#e7eef8;
      --steel2:#90a4bf;

      --gold1:#f7e7b1;
      --gold2:#caa24c;

      --wine:#5b2030;
      --emerald:#1b6b46;

      --line: rgba(255,255,255,.16);
      --shadow: 0 28px 80px rgba(0,0,0,.55);
      --soft: 0 18px 55px rgba(0,0,0,.35);

      --r: 22px;
      --r2: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:#f7f7fb;
      overflow:hidden;
      background:
        radial-gradient(1400px 900px at 50% 30%, rgba(40,60,85,.26), transparent 60%),
        radial-gradient(1000px 700px at 20% 70%, rgba(45,25,35,.22), transparent 62%),
        radial-gradient(900px 700px at 80% 75%, rgba(25,75,55,.16), transparent 60%),
        linear-gradient(180deg, #050608, #0b0e13 70%, #050608);
      font-family: "IM Fell English", serif;
    }

    /* castle silhouette + fog layers (pure CSS, no images yet) */
    .sky{
      position:fixed; inset:0;
      background:
        radial-gradient(1200px 700px at 50% 18%, rgba(255,255,255,.08), transparent 60%),
        radial-gradient(900px 600px at 20% 20%, rgba(255,255,255,.06), transparent 55%),
        radial-gradient(900px 600px at 80% 24%, rgba(255,255,255,.05), transparent 55%);
      pointer-events:none;
    }

    .castle{
      position:fixed; left:0; right:0; bottom:-10px; height:42vh;
      background:
        linear-gradient(180deg, rgba(255,255,255,0), rgba(0,0,0,.65)),
        repeating-linear-gradient(
          to right,
          rgba(0,0,0,.0),
          rgba(0,0,0,.0) 18px,
          rgba(0,0,0,.08) 18px,
          rgba(0,0,0,.08) 22px
        );
      mask-image: radial-gradient(900px 380px at 50% 40%, black 60%, transparent 100%);
      opacity:.55;
      pointer-events:none;
    }

    .fog{
      position:fixed; inset:-40px;
      background:
        radial-gradient(700px 240px at 20% 65%, rgba(255,255,255,.10), transparent 70%),
        radial-gradient(720px 260px at 60% 60%, rgba(255,255,255,.08), transparent 72%),
        radial-gradient(680px 240px at 85% 68%, rgba(255,255,255,.09), transparent 72%),
        radial-gradient(900px 360px at 50% 90%, rgba(255,255,255,.08), transparent 75%);
      filter: blur(12px);
      opacity: .95;
      animation: fogMove 16s ease-in-out infinite;
      pointer-events:none;
      mix-blend-mode: screen;
    }
    @keyframes fogMove{
      0%{ transform: translate3d(0,0,0) scale(1.02); }
      50%{ transform: translate3d(-16px,8px,0) scale(1.06); }
      100%{ transform: translate3d(0,0,0) scale(1.02); }
    }

    /* Layout */
    .wrap{
      height:100%;
      display:flex;
      flex-direction:column;
      gap:14px;
      padding:16px;
      max-width:1200px;
      margin:0 auto;
      position:relative;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 16px;
      border:1px solid var(--line);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(10,14,18,.62), rgba(10,14,18,.35));
      backdrop-filter: blur(8px);
      box-shadow: var(--soft);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 240px;
    }

    .crest{
      width:44px; height:44px; border-radius:14px;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,.85), rgba(255,255,255,.16) 55%),
        linear-gradient(180deg, rgba(215,180,90,.45), rgba(90,70,30,.18));
      border:1px solid rgba(245,230,180,.35);
      box-shadow: 0 18px 40px rgba(0,0,0,.35), inset 0 0 0 2px rgba(255,255,255,.08);
      display:grid;
      place-items:center;
      position:relative;
    }
    .crest:before{
      content:"♛";
      font-family: "Cinzel", serif;
      font-weight: 800;
      color: rgba(245,231,177,.95);
      text-shadow: 0 10px 26px rgba(202,162,76,.22);
      transform: translateY(-1px);
      font-size: 22px;
    }

    .titles{
      display:flex; flex-direction:column; gap:2px;
    }
    .titles .t1{
      font-family: "Cinzel", serif;
      font-weight: 800;
      letter-spacing: .8px;
      font-size: 16px;
      text-transform: uppercase;
    }
    .titles .t2{
      font-size: 12px;
      color: rgba(255,255,255,.72);
    }

    .meta{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(10,14,18,.45);
      font-size:12px;
      color: rgba(255,255,255,.78);
      backdrop-filter: blur(8px);
      display:flex; gap:8px; align-items:center;
      white-space: nowrap;
    }
    .pill b{ color: rgba(245,231,177,.95); font-weight: 800; }

    /* Main area: stage + drawer */
    .stage{
      flex:1;
      display:grid;
      grid-template-columns: 1fr 0.9fr;
      gap:14px;
      align-items:stretch;
      min-height: 0;
    }
    @media (max-width: 980px){
      .stage{ grid-template-columns: 1fr; }
    }

    .panel{
      border:1px solid rgba(255,255,255,.16);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(10,14,18,.62), rgba(10,14,18,.30));
      backdrop-filter: blur(8px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      min-height: 0;
    }

    .panelHead{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.14);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .panelHead .name{
      font-family:"Cinzel", serif;
      font-weight:800;
      letter-spacing:.7px;
      text-transform:uppercase;
      font-size: 13px;
      color: rgba(245,231,177,.92);
    }
    .panelHead .desc{
      font-size: 12px;
      color: rgba(255,255,255,.70);
    }

    /* “Parchment” inside */
    .scroll{
      margin:14px;
      border-radius: 18px;
      border:1px solid rgba(245,231,177,.26);
      background:
        radial-gradient(900px 280px at 30% 10%, rgba(255,255,255,.40), transparent 60%),
        linear-gradient(180deg, var(--paper), var(--paper2));
      color: var(--ink);
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      padding:14px;
      position:relative;
      overflow:hidden;
    }
    .scroll:before, .scroll:after{
      content:"";
      position:absolute;
      width:130px; height:130px;
      background: radial-gradient(circle at 30% 30%, rgba(202,162,76,.35), transparent 70%);
      filter: blur(2px);
      opacity:.7;
    }
    .scroll:before{ left:-44px; top:-44px; }
    .scroll:after{ right:-52px; bottom:-52px; }

    .scrollTitle{
      font-family:"Cinzel", serif;
      font-weight:800;
      letter-spacing:.6px;
      text-transform:uppercase;
      font-size:14px;
      margin-bottom:8px;
    }
    .scrollSub{
      color: rgba(11,15,20,.74);
      font-size: 13px;
      line-height: 1.35;
    }

    /* Bottom category strip */
    .bottomBar{
      border:1px solid rgba(255,255,255,.16);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(10,14,18,.60), rgba(10,14,18,.34));
      backdrop-filter: blur(8px);
      box-shadow: var(--soft);
      padding:12px 12px 10px;
      overflow:hidden;
    }

    .catStrip{
      display:flex;
      gap:10px;
      overflow:auto;
      padding-bottom:6px;
      scrollbar-width: thin;
    }
    .catStrip::-webkit-scrollbar{ height:8px; }
    .catStrip::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); border-radius:999px; }

    .cat{
      flex:0 0 auto;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      transition: .14s;
      user-select:none;
      min-width: 210px;
    }
    .cat:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
    .cat.active{
      outline: 2px solid rgba(245,231,177,.26);
      background: rgba(245,231,177,.08);
    }

    .medal{
      width:34px; height:34px; border-radius:12px;
      border:1px solid rgba(245,231,177,.30);
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,.78), rgba(245,231,177,.14) 60%),
        linear-gradient(180deg, rgba(202,162,76,.42), rgba(20,24,30,.08));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.07);
      display:grid; place-items:center;
      color: rgba(245,231,177,.95);
      font-family:"Cinzel", serif;
      font-weight: 800;
    }

    .catText{
      display:flex; flex-direction:column;
      gap:2px;
      line-height:1.1;
    }
    .catText b{
      font-family:"Cinzel", serif;
      font-weight:800;
      font-size: 12px;
      letter-spacing:.5px;
      text-transform:uppercase;
    }
    .catText span{
      font-size: 12px;
      color: rgba(255,255,255,.70);
    }

    /* ===== Sword Drawer ===== */
    .drawerWrap{
      position:relative;
      height:100%;
      display:flex;
      flex-direction:column;
      min-height:0;
    }

    .drawer{
      position:absolute;
      inset:0;
      transform: translateX(105%);
      transition: transform .38s cubic-bezier(.2,.9,.2,1);
      display:flex;
      flex-direction:column;
    }
    .drawer.open{
      transform: translateX(0);
    }

    /* sword visual on left edge of drawer */
    .sword{
      position:absolute;
      left:-84px;
      top:84px;
      width: 140px;
      height: 420px;
      transform: rotate(-18deg);
      opacity:0;
      transition: opacity .18s ease, transform .38s cubic-bezier(.2,.9,.2,1);
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.55));
      pointer-events:none;
    }
    .drawer.open .sword{
      opacity:1;
      transform: rotate(-10deg) translateX(-8px);
    }

    /* Sword parts */
    .blade{
      position:absolute;
      left:52px;
      top:0;
      width:20px;
      height:310px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(231,238,248,.95), rgba(144,164,191,.55));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.15);
      overflow:hidden;
    }
    .blade:after{
      content:"";
      position:absolute; inset:-40px;
      background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.55), transparent 60%);
      transform: translateY(-60px);
      animation: shine 2.6s ease-in-out infinite;
      opacity:.55;
    }
    @keyframes shine{
      0%{ transform: translateY(-120px); opacity:.0; }
      35%{ opacity:.55; }
      65%{ opacity:.35; }
      100%{ transform: translateY(380px); opacity:.0; }
    }
    .guard{
      position:absolute;
      left:28px;
      top:306px;
      width:68px;
      height:12px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(247,231,177,.9), rgba(202,162,76,.55));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.10);
    }
    .hilt{
      position:absolute;
      left:54px;
      top:318px;
      width:16px;
      height:58px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(90,32,48,.85), rgba(30,16,22,.85));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.08);
    }
    .pommel{
      position:absolute;
      left:48px;
      top:372px;
      width:28px;
      height:28px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.55), rgba(202,162,76,.55));
      border:1px solid rgba(245,231,177,.25);
      box-shadow: 0 18px 30px rgba(0,0,0,.30), inset 0 0 0 2px rgba(255,255,255,.08);
    }

    /* Drawer content */
    .drawerInner{
      height:100%;
      display:flex;
      flex-direction:column;
      padding-left: 0;
    }

    .drawerBody{
      padding:14px 14px 16px;
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
      overflow:auto;
      min-height:0;
    }
    @media (max-width: 980px){
      .drawerBody{ grid-template-columns: 1fr; }
    }

    .knightCard{
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      transition:.15s;
      user-select:none;
      box-shadow: 0 18px 44px rgba(0,0,0,.30);
    }
    .knightCard:hover{ transform: translateY(-2px); background: rgba(255,255,255,.09); }
    .knightCard.selected{
      outline: 2px solid rgba(245,231,177,.30);
      box-shadow: 0 0 0 6px rgba(245,231,177,.10), 0 18px 44px rgba(0,0,0,.32);
    }
    .portrait{
      height:150px;
      background:
        radial-gradient(900px 220px at 20% 10%, rgba(255,255,255,.12), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.22));
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      padding:12px;
      position:relative;
    }
    .portrait img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:.95;
      filter: contrast(1.05) saturate(1.05);
    }
    .portrait:after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(900px 280px at 30% 10%, rgba(255,255,255,.18), transparent 60%),
                  linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.46));
      pointer-events:none;
    }

    .banner{
      position:relative;
      display:flex; align-items:center; gap:10px;
      z-index:1;
    }
    .shield{
      width:34px;height:34px;border-radius:12px;
      background: linear-gradient(180deg, rgba(231,238,248,.90), rgba(144,164,191,.45));
      border:1px solid rgba(255,255,255,.16);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.08);
      display:grid; place-items:center;
      font-family:"Cinzel", serif;
      color: rgba(245,231,177,.95);
      font-weight: 900;
    }
    .banner b{
      font-family:"Cinzel", serif;
      font-weight:800;
      letter-spacing:.5px;
      text-transform:uppercase;
      font-size: 12px;
      text-shadow: 0 18px 40px rgba(0,0,0,.45);
    }

    .knightMeta{
      padding:10px 12px 12px;
      color: rgba(255,255,255,.78);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .knightMeta .hint{
      font-size:12px;
      color: rgba(255,255,255,.66);
    }
    .crown{
      color: rgba(245,231,177,.95);
      text-shadow: 0 12px 28px rgba(202,162,76,.25);
      font-size: 14px;
    }

    .drawerFooter{
      padding:12px 14px 14px;
      border-top: 1px solid rgba(255,255,255,.12);
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }

    .btn{
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.90);
      cursor:pointer;
      transition: .14s;
      font-family:"Cinzel", serif;
      font-weight: 800;
      letter-spacing: .6px;
      text-transform: uppercase;
      font-size: 12px;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.11); }
    .btn.primary{
      border-color: rgba(245,231,177,.30);
      background: linear-gradient(180deg, rgba(245,231,177,.16), rgba(255,255,255,.08));
    }
    .btn.ghost{ background: rgba(255,255,255,.04); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

    /* little note */
    .note{
      margin-top:10px;
      font-size:12px;
      color: rgba(255,255,255,.68);
      line-height:1.35;
    }
  </style>
</head>
<body>
  <div class="sky"></div>
  <div class="fog"></div>
  <div class="castle"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="crest"></div>
        <div class="titles">
          <div class="t1">PEAK • Royal Vote</div>
          <div class="t2">Нажимай номинацию снизу — меч достанет меню выбора</div>
        </div>
      </div>
      <div class="meta">
        <div class="pill">Nomination: <b id="pillNom">—</b></div>
        <div class="pill">Chosen: <b id="pillChosen">0</b></div>
      </div>
    </header>

    <div class="stage">

      <!-- Left: Lore + explanation -->
      <section class="panel">
        <div class="panelHead">
          <div>
            <div class="name">The Royal Chronicle</div>
            <div class="desc">Голосование в стиле королей и замков</div>
          </div>
        </div>

        <div class="scroll">
          <div class="scrollTitle">Как это работает</div>
          <div class="scrollSub">
            Внизу — список номинаций. Нажми на любую:
            <br><br>
            ⚔︎ Меч “вытаскивает” панель выбора.<br>
            ♛ Выбираешь человека — он становится победителем этой номинации от тебя.<br>
            ✦ Так пройди все номинации.
            <br><br>
            <b>Пока что</b> это только дизайн и UX. Потом подключим отправку в таблицу.
          </div>

          <div class="note">
            Советы по стилю: добавим фоны замков, реальные мечи/гербы (картинки), и звуки металла.
          </div>
        </div>
      </section>

      <!-- Right: Sword drawer -->
      <section class="panel drawerWrap">
        <div class="panelHead">
          <div>
            <div class="name" id="drawerTitle">Choose a Champion</div>
            <div class="desc" id="drawerDesc">Выбери победителя для номинации</div>
          </div>
          <div style="display:flex;gap:10px;align-items:center;">
            <div class="pill" style="background:rgba(255,255,255,.06)">Tap category ↓</div>
          </div>
        </div>

        <div class="drawer" id="drawer">
          <div class="sword" aria-hidden="true">
            <div class="blade"></div>
            <div class="guard"></div>
            <div class="hilt"></div>
            <div class="pommel"></div>
          </div>

          <div class="drawerInner">
            <div class="drawerBody" id="peopleGrid"></div>

            <div class="drawerFooter">
              <button class="btn ghost" id="btnClose">Close</button>
              <button class="btn primary" id="btnConfirm" disabled>Confirm</button>
            </div>
          </div>
        </div>

        <div style="padding:14px; color:rgba(255,255,255,.68); font-size:12px;">
          Подсказка: выбери номинацию снизу, чтобы открыть “Sword Drawer”.
        </div>
      </section>
    </div>

    <!-- Bottom nominations strip -->
    <section class="bottomBar">
      <div class="catStrip" id="catStrip"></div>
    </section>
  </div>

  <script>
    /* ===== DATA (пока мок) ===== */
    const CATEGORIES = [
      { id:"aura",  title:"Peak Aura",  sub:"Кто самый вайбовый?" },
      { id:"drip",  title:"Peak Drip",  sub:"Кто самый стильный?" },
      { id:"humor", title:"Peak Humor", sub:"Кто смешнее всех?" },
      { id:"mc",    title:"Main Character", sub:"Кто главный герой?" },
      { id:"iq",    title:"Peak IQ",    sub:"Кто самый умный?" },
      { id:"rizz",  title:"Peak Rizz",  sub:"Кто харизматичнее всех?" },
    ];

    const PEOPLE = [
      { name:"Ivan",  img:"https://images.unsplash.com/photo-1520975958225-1f2a2f1b63c5?auto=format&fit=crop&w=900&q=60" },
      { name:"Masha", img:"https://images.unsplash.com/photo-1524503033411-c9566986fc8f?auto=format&fit=crop&w=900&q=60" },
      { name:"Sasha", img:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=900&q=60" },
      { name:"Lera",  img:"https://images.unsplash.com/photo-1524502397800-2eeaad7c3fe5?auto=format&fit=crop&w=900&q=60" },
      { name:"Dima",  img:"https://images.unsplash.com/photo-1520975661595-6453be3f7070?auto=format&fit=crop&w=900&q=60" },
      { name:"Katya", img:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=900&q=60" },
    ];

    /* ===== STATE ===== */
    const chosen = {}; // categoryId -> personName
    let activeCat = null;
    let pendingPick = null;

    /* ===== UI ===== */
    const catStrip = document.getElementById("catStrip");
    const drawer = document.getElementById("drawer");
    const peopleGrid = document.getElementById("peopleGrid");
    const pillNom = document.getElementById("pillNom");
    const pillChosen = document.getElementById("pillChosen");
    const drawerTitle = document.getElementById("drawerTitle");
    const drawerDesc = document.getElementById("drawerDesc");
    const btnClose = document.getElementById("btnClose");
    const btnConfirm = document.getElementById("btnConfirm");

    function countChosen(){
      return Object.keys(chosen).length;
    }
    function updateTop(){
      pillNom.textContent = activeCat ? activeCat.title : "—";
      pillChosen.textContent = String(countChosen());
    }

    function renderCategories(){
      catStrip.innerHTML = "";
      CATEGORIES.forEach((c, idx)=>{
        const el = document.createElement("div");
        el.className = "cat" + (activeCat && activeCat.id===c.id ? " active":"");
        el.innerHTML = `
          <div class="medal">${idx+1}</div>
          <div class="catText">
            <b>${c.title}</b>
            <span>${c.sub}</span>
          </div>
        `;
        el.addEventListener("click", ()=>{
          openCategory(c);
          document.querySelectorAll(".cat").forEach(x=>x.classList.remove("active"));
          el.classList.add("active");
        });
        catStrip.appendChild(el);
      });
    }

    function renderPeople(){
      peopleGrid.innerHTML = "";
      pendingPick = null;
      btnConfirm.disabled = true;

      const already = activeCat ? chosen[activeCat.id] : null;

      PEOPLE.forEach((p, i)=>{
        const card = document.createElement("div");
        card.className = "knightCard" + (already===p.name ? " selected":"");
        card.innerHTML = `
          <div class="portrait">
            <img src="${p.img}" alt="${p.name}">
            <div class="banner">
              <div class="shield">${String.fromCharCode(65+i)}</div>
              <b>${p.name}</b>
            </div>
          </div>
          <div class="knightMeta">
            <div class="hint">Tap to choose</div>
            <div class="crown">♛</div>
          </div>
        `;
        card.addEventListener("click", ()=>{
          pendingPick = p.name;
          btnConfirm.disabled = false;
          // selection UI
          [...peopleGrid.children].forEach(x=>x.classList.remove("selected"));
          card.classList.add("selected");
        });

        peopleGrid.appendChild(card);
      });
    }

    function openCategory(c){
      activeCat = c;
      drawerTitle.textContent = "Choose a Champion";
      drawerDesc.textContent = `Номинация: ${c.title}`;
      updateTop();
      renderPeople();
      drawer.classList.add("open");
      // маленький эффект "скрежет меча" — пока без звука
      // позже подключим звук металла
    }

    btnClose.addEventListener("click", ()=>{
      drawer.classList.remove("open");
      pendingPick = null;
      btnConfirm.disabled = true;
    });

    btnConfirm.addEventListener("click", ()=>{
      if(!activeCat || !pendingPick) return;
      chosen[activeCat.id] = pendingPick;
      updateTop();
      btnConfirm.disabled = true;
      pendingPick = null;
      // оставляем drawer открытым — чтобы можно было быстро поменять
      renderPeople();
    });

    // init
    renderCategories();
    updateTop();
  </script>
</body>
</html>
